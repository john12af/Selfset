<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini Live Voice</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; text-align: center; background: #121212; color: white; padding: 20px; }
        .status { margin: 20px; font-size: 1.2rem; color: #00d4ff; }
        .mic-btn { 
            width: 80px; height: 80px; border-radius: 50%; border: none; 
            background: #ff4b2b; color: white; font-size: 1.5rem; cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 75, 43, 0.5);
        }
        .listening { animation: pulse 1.5s infinite; background: #28a745; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

    <h1>Gemini Live</h1>
    <div id="status" class="status">Button dabayein aur bolna shuru karein</div>
    
    <button id="mic-btn" class="mic-btn" onclick="startVoiceChat()">ðŸŽ¤</button>

    <script type="module">
        import { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

        const API_KEY = "AIzaSyC6ZP2sTzO2bAPs_VwaW6zYCRSDFABtlHs"; // Yahan apni key dalein
        const genAI = new GoogleGenerativeAI(API_KEY);
        const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

        const statusText = document.getElementById('status');
        const micBtn = document.getElementById('mic-btn');

        // 1. Voice Recognition (Sunne ke liye)
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'hi-IN'; // Hindi/English dono samjhega

        window.startVoiceChat = function() {
            recognition.start();
            statusText.innerText = "Main sun raha hoon...";
            micBtn.classList.add('listening');
        };

        recognition.onresult = async (event) => {
            const userText = event.results[0][0].transcript;
            statusText.innerText = "Aapne kaha: " + userText;
            micBtn.classList.remove('listening');

            // 2. Gemini se jawab lein
            try {
                const result = await model.generateContent(userText);
                const responseText = await result.response.text();
                speak(responseText); // AI ko bulwayein
            } catch (err) {
                statusText.innerText = "Error ho gaya!";
            }
        };

        // 3. Text to Speech (Bolne ke liye)
        function speak(text) {
            statusText.innerText = "Gemini bol raha hai...";
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'hi-IN'; // Hindi voice
            window.speechSynthesis.speak(utterance);
            
            utterance.onend = () => {
                statusText.innerText = "Jawab pura hua. Phir se bolne ke liye Mic dabayein.";
            };
        }
    </script>
</body>
</html>
